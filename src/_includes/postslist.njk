{% from "macros.njk" import tagList, dateAndReadingtime %}

{% for post in postslist %}
  <div class="post__card">
    <div class="post__metadata">
      <h2 class="post__title">
        <a href="{{ post.url }}">{{ post.data.title }}</a>
      </h2>
      {{ dateAndReadingtime(post.date, post.templateContent) }}
      {{ tagList(post.data.tags) }}
      <p class="post__excerpt">{{ post.data.description }}</p>
    </div>
    <div class="post__image">
      <a href="{{ post.url }}">
        {%- if loop.first %}
          {% set loading = "eager" %}
        {%- else %}
          {% set loading = "lazy" %}
        {%- endif %}
      {% image "src/assets/img/" + post.data.imagesrc, post.data.imagealt, "(min-width: 540px) 500px, 95.45vw", loading %}</a>
    </div>
  </div>
  {%- if not loop.last %}<hr>{% endif %}
{% endfor %}
